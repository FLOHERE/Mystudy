# Chapter2. 관계  데이터 모델
- 학습 목표
	- 관계 데이터 모델
		- 관계 데이터 모델의 개념을 이해
		- 무결성 제약조건에 대해 이해 
			- 데이터 무결성, 도메인 무결성, 개체 무결성 , 참조 무결성
		- 관계 대수에 대해 이해 
			- 관계대수 연산자, 관계대수식

## 01. 관계 데이터 모델의 개념
- 릴레이션
- 릴레이션 스키마와 인스턴스
- 릴레이션의 특징
- 관계 데이터 모델 

### 01-1) 릴레이션의 개념
- 릴레이션(relation)
	- 행과 열로 구성된 테이블
- 용어
	- relation : 테이블(관계 아님, 테이블이라고 읽어라)
	- realational data model : 관계 데이터 모델
	- realtional database : 관게 데이터 베이스
	- relational algebra : 관계 대수
	- realtionship : 관계
- 릴레이션이란?
	- 첫번째 행: 네개의 집합중 각각 한개의 원소를 선택해서 만든것.
	- 이 원소들이 relationship을 맺음
![[Pasted image 20240407221521.png]]

- 관계(relation)
	- 릴레이션 내에서 생성되는 관계
		- 릴레이션 내 데이터들의 관계
	- 릴레이션 간에 생성되는 관계
		- 릴레이션 간의 관계
![[Pasted image 20240407224037.png]]

### 01-2) 릴레이션 [[스키마]]와 인스턴스
- 릴레이션에 사용되는 용어를 학습
	- 속성,투플, 스키마, 인스턴스
![[Pasted image 20240407224436.png]]

- 릴레이션 스키마(=내포)
	- 속성(attribute)
		- 릴레이션  스키마의 열
	- 도메인(domain)
		- 속성이 가질수 있는 값의 집합
	- 차수(degree)
		- 속성의 개수

- 스키마의 표현
```SQL
릴레이션 이름(속성1 : 도메인1, 속성2: 도메인 2, ...)
		- 예) 도서(도서번호, 도서이름, 출판사, 가격)
		- 도서)(도서번호 : integer, 도서이름:char(40), 
					출판사 : char(40), 가격 : integer)
```

- 릴레이션(테이블) 인스턴스(=외연)
	- 투플(tuple)
		- 릴레이션의 행
	- 카디날리티(cardinality) or 카디널리티
		- 투플의 수

### 01-3) 릴레이션의 특징
- 속성은 단일값을 가진다.
	- 각 속성의 값은 도메인에 정의 된 값만 기잠
	- 단일값(= 원자값) : 두개이상의 값을 가지지 않는다.
- 속성은 서로 다른 이름을 가진다.
	- 속성은 한 릴레이션에서 서로 다른 이름을 가져야함
- 한 속성의 값은 모두 같은 도메인 값을 가짐
	- 한 속성에 속한 열은 모두 그 속성에서 정의한 도메인 값만 가짐
- 속성의 순서는 상관 없음
	- 속성의 순서가 달라도 리레이션 스키마 같음
	- ex_)(이름,주소) = (주소, 이름)
- 릴레이션 내의 중복된 투플은 허용하지 않음
	- 하나의 릴레이션 인스턴스 내에 서로 중복된 값 못가짐
	- 모든 투플은 서로 값이 달라야함
- 투플의 순서는 상관 없음

- 릴레이션의 특정에 위배되는 경우
	- 속성은 단일 값, 중복된 투플은 허용 X

![[Pasted image 20240407231405.png]]

### 01-4) 관계 데이터 모델
- 관계 데이터 모델은 데이터를 2D 테이블 형태인 릴레이션으로 표현
	- 릴레이션에 대한 제약조건과 관계 연산을 위한 관계대수를 정의함

## 02. 무결성 제약조건
- 키
- 무결성 제약조건
- 무결성 제약조건의 수행

### 02-1) 키(Key)
- 키 : 특정 투플을 식별할때 사용하는 속성(속성의 집합)
- 릴레이션 = 중복된 투플 지원 X
	- 각각의 투플에 포함된 속성중 하나이상은 값이 다름.
	- 값이 다른 속성 = 키로 설정
		- 값이 달라서 구별에 쓰이는거임
- 키는 릴레이션간의 관계를 맺는데도 사용
	- 키 = 중복되는 투플 방지

### 02-2) 슈퍼키(Super Key)
- 투플을 유일하게 식별할수 있는 하나의 속성(속성의 집합)
	- 투플을 유일하게 식별할수 있는 값 = 모두 슈퍼키
	- ex_)
		- 고객번호 : 유일값O = 수펴키O
		- 이름 : 동명이인이 있을수도? = 슈퍼키X
		- 주민번호 : 유일값 O = 슈퍼키O
		- 주소 : 가족끼리 같은 집에 살수도.. = 수퍼키X
		- 핸드폰 : 한사람이 여러대의 핸드폰 사용 or 핸드폰이 없을 수도 ? = 슈퍼키X

### 02-3) 후보키(Candidate Key)
- 투플을 유일하게 식별 할수 있는 속성의 최소 집합
	- "유일하게 식별" = "유일성"을 가진다.
	- "최소집합" = "최소성"을 가진다.
- ex_)
![[Pasted image 20240409154657.png]]
- 주문 릴레이션의 후보키 : 고객번호 + 도서번호 (2개의 속성을 합쳐 사용)
	- 고객이 같은 도서를 한번만 구입할수 있다고 가정
- 복합키(composite key)
	- 2개 이상의 속성으로 이루어진 키

### 02-4) 기본키(Primary Key)
- 여러 후보키 중 하나를 선정, 대표로 삼는 키
- 후보키가 하나뿐이라면 그 후보키를 기본키로 사용
- 후보키가 여러개 = 릴레이션의 특성을 반영, 하나 선택

- 기본키 선정시 고려사항
	- 고유한 값을 가져야 함
	- NULL 값은 허용 X
	- 키 값의 변동이 일어나지 않아야 함
	- 최대한 적은 수의 속성을가진 것이어야 함
	- 문제 소지 X 여야함
- 렐리이션 스키마를 표현  (기본키는 이텔릭 표시)
	- 릴레이션 이름(*속성1*, 속성2..속성N)
	- 고객(*고객번호*, 이름,주민번호, 주소, 핸드폰)
	- 도서(*도서번호*, 도서이름, 출판사, 가격)

### 02-5) 대리키(Surrogate Key)
- 일련번호 같은 가상의 속성을 만들어 기본키로 설정
	- 기본키가 보안을 요한 경우
	- 여러개의 속성으로 구성되어 복잡한 경우
	- 마땅한 기본키가 없는 경우
- 대리키(surrogate key) = 인조키(artificial key)
- 대리키는 DBMS나 관련 소프트웨어에서 임의로 생성하는 값으로 사용자가 직관적으로 그 값의 의미를 모름

- 기존의 주문 릴레이션 = 복합키 사용 = 복잡하다!
	- "주문번호" 라는 새로운 속성을 생성
	- 한명의 고객이 같은도서를 구입할수 있게 해줌
![[Pasted image 20240409160813.png]]

### 02-6) 대체키(Alternate key)
- 기본키로 선정되지 않은 후보키

### 02-7) 외래키(Foreign Key) - 시발 이게 뭔 개소리야 씨발
- 다른 릴레이션의 기본키를 참조하는 속성
	- 릴레이션간의 관계(relationship) 를 표현
![[Pasted image 20240409161752.png]]

- 외래키의 특징
	- 관계 데이터 모델의 릴레이션 간의 관계를 표현
	- 다른 릴레이션의 기본키 참조
	- 참조하고(외래키) 참조되는(기본키)의 양쪽 릴레이션의 도메인?은 서로 같아야 한다.
	- 참조되는(기본키) 값이 변경되면 참조하는(외래키) 값도 변경됨
		- ==참조 무결성 제약조건(외래키 제약조건): 없는 값을 참조하게 될 경우의 대안 방안==
	- Null 값과 중복 값 등 허용