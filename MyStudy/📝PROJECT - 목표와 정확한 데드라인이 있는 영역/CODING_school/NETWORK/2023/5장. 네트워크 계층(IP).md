##  1. 프로토콜
### 프로토콜
- 서로 다른 시스템에 있는 개체 간에 성공적으로 데이터를 전송하는 통신 규약
	- 개체에는 데이터 베이스 관리 시스템, 전자우편 시스템, 사용자 프로그램 등이 포함.
	- 시스템 : 하나 이상의 개체를 보유한 컴퓨터
	- 프로토콜은 계층적 구조로 정의, 각 계층의 역할을 구분함.
	- ex_) 편지를 배달하는것과 같음. 우체통에 넣는 단계, 편지를 수거하는 단계 , 지역별로 구분하는 단계~~~
- 시스템 간의 통신과 관련된 복잡한 상호 작용을 세분화 -> 계층화 한것.
	- 이해하기 쉬움.
	- 각 계층간 표준 인터페이스가 정의 되어 있어 표준만 따르면 다른 업체의 시스템과도 호환 가능.
- 네트웨크에서 통신하려는 두 시스템 간에 무엇을, 언제, 어떻게 통신 할것인지 미리 정해 놓은 약속

## 2.인터넷 표준 프로토콜
### TCP/IP 프로토콜
- 네트워크는 서로 다른 기종의 컴퓨터로 구성
	- 네트워크 간에 공통으로 사용할수 있는 프로토콜의 필요성 대두
- 이에 따라 인터넷에서 컴퓨터 간의 통신이 가능하도록 표준화
	- 채택한 통신 규약이 TCP/IP이다.
- TCP/IP 
	- 인터넷의 두 호스트 간 데이터 흐름의 정확성을 보장하는 프로토콜임.
	- '전송 제어 프로토콜[Transmission Control Protocol, TCP]'
	- '인터넷 프로토콜 [Internet Protocol, IP]' 을 의미한다.
- IP : 패킷으로 변환된 데이터를 네트워크를 통해 멀리 떨어진 호스트에 보냄
	- 데이터 패킷을 전송하는 것.
- TCP : 전송된 패킷에 오류가 발생하면 재전송을 요청, 재전송 된 패킷에 오류가 없으면 원래의 데이터로 재결합.
	- 데이터의 흐름을 제어, 데이터가 정확한지 검사.

### TCP/IP 프로토콜의 구조
- TCP/IP 프로토콜은 네트워크 접속 계층, 네트워크 계층, 전송 계층, 응용계층으로 구분된다.
- OSI 참조 모델의 7계층에 대응되는 TCP/IP 프로토콜의 계층.
	- 네트워크 계층
![[Pasted image 20231024203802.png]]

- 네트워크 접속 계층
	- TCP/IP의 경우 하위 계층인 물리 계층과 데이터 링크 계층을 특별히 정의 하지 않음.
		- 단지 , 모든 표준 및 임의 네트워크를 지원할수 있도록 함.
	- 네트워크 접속 계층은 운영체제의 네트워크 카드와 디바이스 드라이버 등 하드웨어 적인 요소와 관련된 모든 것을 지원하는 계층.
	- 데이터 링크 계층의 역할을 하는 TCP/IP 프로토콜에는 이더넷, 802.11x, MAC/LLC, SLIP,PPP등

- 네트워크 계층
	- 인터넷 계층, 네트워크의 패킷 전송 제어
	- 프로토콜은 IP,ARP,ICMP,IGMP 이다.
	- 역할 : 데이터 그램을 정확한 수신지로 전송
		- 데이터 그램: IP프로토콜에서 다루는 패킷 데이터
	- 데이터 그램에 있는 정보는 송신지 주소와 수신지 주소 , 보내는 데이터, 몇가지 제어 필드 등이다.
	- 네트워크 계층의 송신 측 컴퓨터에서는 상위 계층으로 부터 전달받은 패킷에 
	  논리 주소인 IP 주소를 포함한 헤더를 추가하여 하위 계층인 네트워크 접속 계층에 전달.
	- 수신 측 컴퓨터에서는 하위 계층으로 부터 전달 받은 프레임의 헤더 정보를 확인한 후
	  송신측 컴퓨터의 네트워크 계층에서 추가한 헤더를 제거 -> 상위 계층인 전송 계층에 전달

![[Pasted image 20231024204809.png]]

### 네트워크 계층
- 논리주소(Logical address)지정
	- 물리주소는 하나의 네트워크(LAN)에서만 유효
	- 여러 네트워크 (LAN)을 거쳐 전송 시 모든 네트워크에 존재하는 각 장치(인터페이스)를 식별하기 위해 별도의 주소 시스템 필요 => 논리주소
	- 상위 계층으로부터 받은 패킷에 발신지와 수신지의 논리주소 추가
>[!note] 
>물리주소 -> 로컬 주소
>논리주소 -> 글로벌 주소

### 전송계층
- 상위 계층에서 볼때 전송 게층은 호스트간의 데이터 전송을 담당하는 계층.
	- TCP,UDP 사용
- 전송 계층의 역할 : 네트워크 양단의 송수신 호스트 간에 신뢰성 있는 전송 기능 제공
	- OSI참조 모델의 세션 계층 일부
	- 전송 계층이 해당
- 전송계층의 송신측 컴퓨터에서는 상위 계층으로부터 전달 받은 데이터를 효율적으로 전송하기 위해 패킷 단위로 분할
	- 수신 측 컴퓨터에서는 하위 계층으로부터 전달 받은 패킷을 원래의 데이터로 재결합.
- 송신 측 컴퓨터에서 패킷을 생성할때 TCP를 이용 -> 해당 패킷에 TCP 헤더 정보 포함.
  UDP를 이용 -> 해당 패킷에 UDP 헤더 정보 포함.
- 수신 측 컴퓨터는 전송 받은 패킷의 헤더 정보를 통해 TCP를 이용하여 만든 패킷인지, 아니면 UDP를 이용하여 만든 패킷인지 알아낸다.
	- TCP 패킷이면 TCP프로토콜을 사용하여 재결합
	  UDP 패킷이면 UDP 프로토콜을 사용하여 재결합 한다.

### 응용계층
- TCP/IP 프로토콜의 범위에는 응용 계층의 프로토콜까지 포함됨.
  이러한 프로토콜은 FTP(파일전송), SMTP(이메일), SNMPM(네트워크 관리) 등이다.
	- TCP/IP 프로토콜을 이용한 응용 프로그램중에서 우리가 직접 사용하는 인터넷 메일 프로그램(아웃룩 익스프레스)나 웹 브라우저(인터넷 익스플로러) 등을 응용 계층으로 분류할수 있다.
- TCP/IP 프로토콜을 지원하려면 서버 컴퓨터에 프로토콜을 서버 형태로 서비스 하는 데몬(Demon)이라는 프로그램 필요.
- 클라이언트 : 서버 프로그램과 연동하여 작업을 수행하는 원격지의 프로그램
	- 하나의 서비스를 제공하려면 클라이언트의 요청을 처리하는 서버 프로그램, 즉 데몬이 필요
	- 이러한 관계를 보통 '클라이언트/서버 시스템' 이라고함.
![[TCP,IP에서 사용하는 주소.canvas]]
### 물리주소
- MAC주소 = 물리주소
	- 링크 주소 또는 통신망에서 정의 된 노드의 주소
	- 이더넷 네트워크 인터페이스 카드(NIC) 6바이트(48비트) 주소등을 말한다.
- [MAC 주소] : 이더넷에서 각 호스트를 구별하기 위해 모든 이더넷 카드에 개별적으로 부여하는 고유한 식별 번호.
	- 회사에서 제품을 제작 할때 할당하기 때문에 임의로 지정할 수 없다.
	- 윈도우 운영체제 => `ipconfig/all` 명령어로 MAC주소 확인 가능
- 물리주소는 네트워크 접속 계층의 논리적 구성 단위인 프레임에서 사용
	- 이더넷은 6바이트(48비트) 물리 주소를 사용
	- FDDI나 토큰 링 처럼 다른 주소 형태를 사용하기도 함.

	- FDDI(Fiber Distributed Data Interface)
		- 이더넷과 토큰링 방식만큼 많이 사용하진 않음.
		- LAN의 고속 컴퓨터 연결이나 백본(기간망)으로 주로 사용
		- FDDI는 전송매체로 광섬유를 사용 -> 고속의 전송 속도가 장점
		- 매체 점근 방식으로 토큰 제어 방식을 사용. 
		- 통신망은 링형 접속 형태를 띠는 구조.
		- 토큰 링 방식과 유사한 형태, 다른 LAN 구조와는 달리 이중 링형 구졸르 사용
		- 광섬유로 연결된 링의 한 부분이 물리적으로 끊어지면 구리선 처럼 끈긴 부분을 간단하게 연결하지 못하고 라인 전체를 새로이 교체 -> 교체 작업이 완료될때 까지 통신망 사용 안됨.=> 이중 링 구조를 사용하는 이유
		- 전송매체는 광섬유를 사용하므로 가격이 비싸고 설치 및 유지 보수가 어려운 단점 있음
		- 데이터의 내구성과 안전성, 고속 전송등의 장점이 있음.

### 인터넷 주소
- 인터넷에서는 물리 주소와는 별도로 호스트를 식별할 수 있는 유일한 주소를 지정해야 한다.
	- 현재 인터넷에 연결된 호스트를 유일하게 식별할수 있는 32비트 주소 체계를 인터넷 주소로 사용. 
	- 주민 등록 번호나 학번처럼 IP주소를 중복해서 사용할수 없다.

### 포트 주소
- 인터넷 통신의 최종 목적은 한 프로세스가 다른 프로세스와 통신할수 있게 하는것 이다.
- A 컴퓨터에서 FTP를 이용하여 B컴퓨터의 파일을 다운로드 하면서 텔넷을 이용하여 C 컴퓨터에도 접속해서 통신하는 경우, 동시에 발생하는 프로세스를 처리하려면 각 프로세스를 식별하는 방법이 필요.
  즉, 프로세스 식별 주소가 있어야 한다.  
  TCP/IP 구조에서는 포트 주소를 사용하여 이를 식별하며, TCP/IP 포트 주소의 길이는 16비트이다.
  ![[Pasted image 20231025092700.png]]
- TCP 메세지의 헤더 : 오류 검사 기능을 담당하는 순서 번호, 확인 응답 번호 등의 필드와 송수신 포트 번호의 정보가 들어 있다. 
- 포트 번호 : 해당 호스트에서 접근하려는 서비스
	- ex_)친구에게 전화 걺 -> 송수신자의 전화번호는 IP 주소에, 전화를 거는 사람과 받는 사람은 포트 번호에 해당.
- 인터넷에 흩어져 있는 호스트와 통신 하려면 해당 호스트에 접속하는 IP주소와 함꼐 이용하려는 서비스에 접근하는 포트 번호도 알아야 한다. 
- TCP : 송신한 데이터가 수신지에 정확하게 도착했는지 확인하는 역할![[계층과 주소의 관계.canvas]]
## 네트워크 계층
### 네트워크 계층(Network Layer)
- 상위 계층에 연결하는데 필요한 데이터 전송과 경로선택 기능 제공.
	- 라우팅 프로토콜 사용 -> 최적의 경로 선택
- 데이터를 전송할 수신 측의 주소를 찾고 수신된 데이터의 주소를 확인, 내것이면 전송 계층으로 전송
- 데이터를 패킷 단위로 분할 -> 전송한 후 재결합
- OSI 참조 모델 7계층 중 네트워크 계층은 (세번째) 패킷을 송신 측에서 수신측으로 전송
	- 전송 개체 사이에 안정적으로 전송 할수 있도록 서비스를 제공한다. 

## IPv4
### IP주소 (1)
- IP 주소 : 인터넷에 연결된 모든 컴퓨터의 고유의 주소.
	- 현재 사용하는 IP주소 체계
		- IP Ver.4
			- 8비트 크기의 필드 네게를 모아서 구성한 32비트 논리 주소.
			- xxx.xxx.xxx.xxx
			- .(점) 으로 구분한 10진수 형태 네개로 구성
			- 0.0.0.0 ~ 255.255.255.255
		- IP Ver.6
	- 일반 우편 주소를 시, 동, 번지로 구분하는 것 처럼 IP 주소도 네트워크 주소(Net ID)와 호스트 주소(Host ID)로 구분한다.
		- 전체 네트워크를 좀 더 작은 네트워크로 분할하여 각 호스트가 속한 네트워크를 대표한다.
		- 네트워크 주소는 8비트, 16비트, 24비트 크기로 분류한다.
		- 호스트 주소 : 네트워크 주소로 표현하는 네트워크 내부에서 각 호스트의 주소를 표현하는 역할을 함. 전체 32비트에서 네트워크 주소를 제외한 나머지에 해당 한다.
		![[네트워크 주소와 호스트 주소.canvas]]

### IP주소 체계(2)
- IP 주소를 효율적으로 배정하려고 클래스라는 개념을 도입했다.
	- 클래스에는 A,B,C,D,E로 다섯 종류가 있다.
- 이 중 D 클래스는 IP 멀티 캐스팅 용으로 , E클래스는 자원을 확보하려고 예비용으로 분류해 놓았기 때문에 실제로 사용하는 것은 A,B,C 클래스 뿐이다.
- 클래스 구분
	- A 클래스 : 시작 1비트가 **0**으로 시작함
	- B 클래스 : 시작 2비트가 **10** 으로 시작함.
	- C 클래스 : 시작 3비트가 **110**으로 시작함.
	- D 클래스 : 시작 4비트가 **1110**으로 시작함.
	- E 클래스 : 시작 4비트가 **1111**로 시작함
  ![[Pasted image 20231025101708.png]]
### A 클래스
- A 클래스는 네트워크 주소로 8비트 , 호스트 주소로 24비트를 사용한다.
	- 네트워크 주소의 가장 왼쪽에 해당하는 비트는 0으로 고정됨. ->A 클래스 식별자
	- 첫번째 바이트의 첫 비트가 0으로 시작하기 때문에 맨 처음 숫자는 0~127로 시작
	  ==범위는 0.0.0.0에서 127.255.255.255까지==가 된다.
	- 하지만 0.0.0.0은 사요하지 않는 주소, 127.x.x.x는 시스템 루프백 주소라서 사용X
>[!note] 루프백 주소
>가상으로 할당한 인터넷 주소

- 실제로 사용하는 주소는 1~126 까지로 , 1.0.0.0~126.255.255.255
	- 가장 왼쪽 비트가 0이며, 첫번째 옥텟이 Net ID(7비트)
	- 2^7 = 128 중 126개 사용(두개는 특수 목적)
	- 2^24 = 16,777,216 중 호스트 16,777,214개 사용
	  (Host ID가 모두 0인 것과 모두 1 인것은 특별한 의미가 있는 주소)
	- 대형 기관 및 기업에서 사용

### B클래스
- B 클래스를 구분하는 데 사용하는 식별자는 10으로 시작.
	- 네트워크 주소에 16비트 , 호스트 주소에 16비트를 배정하는 클래스다.
- IP 주소의 시작이 128~191 로 시작,
  네트워크 마스크는 255.255.0.0이다.
- ==네트워크 주소는 128.0.0.0~191.255.0.0==까지,
  호스트 주소는 2바이트로 호스트 65,534 개를 구성.
- A클래스와 동일하게 네트워크 주소(0.0) 와 브로드 캐스트 주소(255.255)를 제외한 호스트 수이다.
- IP주소가 128.1.1.1인 호스트는 128.1.0.0 네트워크에 속하며, 호스트 주소는 1.1 이다. 
	- 가장 왼쪽 2비트가 10이며, 옥텟이 두개인 Net ID(14비트)
	- 2^14 = 16,384개 사용 가능
	- Host ID로 16비트 사용
	- 2^16 = 65,536개 호스트(라우터) 65,534개 사용가능(두개는 특별한 주소)
	- 중형 기관 및 기업에서 사용

### C 클래스
- 소규모 네트워크에서 가장 많이 사용하는 클래스로 C 클래스를 구분하는데 사용하는 식별자는 110으로 시작한다.
- 호스트 배정에 총 8비트를 사용할 수 있으므로 호스트를 최대 254개 사용 할 수있다.
- IP주소의 시작이 192~223으로 시작, 기본 네트워크 마스크는 255.255.255.0이다.
- 네트워크 주소는 ==192.0.0.0~223.255.255.0== 까지고, 호스트 주소는 1바이트로 호스트 주소는 254개 사용 할수 있다(0,255 제외)
- IP주소가 200.100.100.100인 호스트는 200.100.100 네트워크에 속하며 호스트 주소는 100이다.
	- 가장 왼쪽 3비트가 110이며 , 옥텟이 세개인 Net ID(21비트)
	- 2^21 = 네트워크를 2097,152개 가질 수 있다.
	- Host ID로 8비트 사용(2^8 = 256)
	- 호스트(라우터)를 254개 가질 수 있음
	- 소규모 기관에서 사용

### D 클래스
- D 클래스 IP 주소는 224~239 까지로 시작하며, 멀티캐스트 용도로 사용한다.
>[!note] 멀티 캐스트 
>데이터 수신 대상이 네트워크에 연결된 일부 컴퓨터

![[Pasted image 20231025103538.png]]

### E 클래스
- E 클래스 IP 주소는 240~255 까지로 시작 하며, 미래에 사용하려고 남겨 놓은 주소
- 255.255.255.255는 전체 컴퓨터에 대한 브로드 캐스트 주소로 사용 한다.
>[!note] 브로드 캐스트
>네트워크에 연결된 전체 컴퓨터를 수신 대상으로 하는 데이터 전송
>192.168.35.255

![[Pasted image 20231025111448.png]]

### 네트워크 주소
- 전체 네트워크에서 작은 네트워크를 식별할 때 사용되고, 호스트ID가 10진수로 0이면 그 네트워크  전체를 대표하는 주소가 된다. 전체 네트워크의 대표 주소가 네트워크 주소라고 생각 하면 된다.
![[Pasted image 20231025111731.png]]

## 5. 서브넷 마스크와 서브넷팅
### 서브넷 
- (A클래스의)
  많은 컴퓨터가 브로드 캐스트 패킷을 전송 -> 모든 컴퓨터에 패킷이 전송 -> 네트워크 혼잡
	- A 클래스의 대규모 네트워크를 좀 더 작은 네트워크로 분할 -> 브로드 캐스트로 전송되는 패킷의 범위를 좁힐수 있는다.
	- 서브넷팅 : 네트워크를 분할함.
	- 서브넷 : 분할된 네트워크
- IP 주소를 보다 효율적으로 활용
- A클래스를 서브넷팅
	- 네트워크 ID + 호스트 ID  -> 네트워크 ID + 서브넷 ID + 호스트 ID로 변경
	- 즉 호스트 ID에서 비트를 빌려 서브넷으로 만든다.
- ![[Pasted image 20231025112721.png]]
  ![[Pasted image 20231025112807.png]]
  ![[Pasted image 20231025113130.png]]

>[!note] 프리픽스
>각자 가질수 있는 한정적인 IP 번호 중에서 자기 마음대로 지정할수 있는 부분.

### HOST ID 범위 구하기
- 주어진 네트워크 주소에서 Host ID 범위 구하기
- 192.168.10.0 /27 
	- 총 비트수 (32bit)에서 네트워크 ID bit 수를 뺀다. (27)
	- 32 - 27 = 5
	- 2의 5승(2^5) = 32
	- 32의 뜻은 현재 네트워크가 0~31 까지라는 것.(192.168.10.0~192.168.10.31)
	  => 다음 네트워크 주소 = 192.168.10.32


### 서브넷 마스크의 개념
- IP 주소의 네트워크 ID와 호스트  ID를 변경하여 네트워크 주소를 보다 효율적으로 사용하기 위한 기술
- 로컬 네트워크 내부 호스트의 IP 대역과 외부 네트워크 대역을 구분할 수 있게 됨.
- sub net : 하위그룹 네트워크
- masking : 같은 그룹 안에 속하도록 같은 주소로 덮어 씌움
- => sub net mask
- 서브넷 : 서브넷 마스킹을 통해 분리된 네트워크 그룹 

### 서브넷 마스크의 구성 및 표현
- IP 주소와 동일하게 32자리의 2진수로 구성
- 각 클래스별 기본 서브넷 마스크는 네트워크 ID 주소의 길이까지 1로 채워 씌워짐.
- 각 클래스별 기본 서브넷 마스크
	- CLASS A 의 기본 서브넷 마스크 : 255.0.0.0
	- CLASS B 의 기본 서브넷 마스크 : 255.255.0.0
	- CALSS C 의 기본 서브넷 마스크 : 255.255.255.0
- 1의 개수가 맨 앞부터 순차적으로 증가. 0 뒤에 1이 나타나는 경우는 없다.
- 서브넷 마스크가 적용된 IP 주소는 IP 주소/ 서브넷 마스크의 형태로 표현
- 이때, / 뒤의 서브넷 마스크는 10진법 4자리 옥텟, 혹은 32자리 2진수중 1의 개수로 표현

### C 클래스의 IP주소를 서브넷팅 하는 방법
- C클래스 이므로 네트워크 ID가 24비트인데,
   네트워크 ID를 26비트로 변경 하려면 2비트를 호스트 ID에서 빌려야 한다. 
   네트워크 ID가 24비트, 서브넷  ID가 2비트, 호스트 ID가 6비트가 된다. 
- 서브넷 마스크를 슬래시(/비트수)로 나타내는 프리픽스 표기법을 사용할수도 있다.
	- ex_) 255.255.0.0 = > /16 
	  255.255.255.0 => / 24
